{% set title = 'homepage.title'|trans %}

{% extends 'base.html.twig' %}
{% block content %}
    <section class="home">
        <!-- home bg -->
        <div class="owl-carousel home__bg">
            <div class="item home__cover" data-bg="{{ asset('img/home/home__bg.jpg') }}"></div>
            <div class="item home__cover" data-bg="{{ asset('img/home/home__bg2.jpg') }}"></div>
            <div class="item home__cover" data-bg="{{ asset('img/home/home__bg3.jpg') }}"></div>
            <div class="item home__cover" data-bg="{{ asset('img/home/home__bg4.jpg') }}"></div>
            <div class="item home__cover" data-bg="{{ asset('img/home/home__bg5.jpg') }}"></div>
        </div>
        <!-- end home bg -->

        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="home__title">{{ 'homepage.now-playing'|trans|raw }}</h1>

                    <button class="home__nav home__nav--prev" type="button">
                        <i class="icon ion-ios-arrow-round-back"></i>
                    </button>
                    <button class="home__nav home__nav--next" type="button">
                        <i class="icon ion-ios-arrow-round-forward"></i>
                    </button>
                </div>

                <div class="col-12">
                    <div class="owl-carousel home__carousel">
                        <!-- card -->
                        {% for movie in nowPlayingMovies|slice(0, 23) %}
                            {% set media_url = path('movie-details', {movieId: movie.id}) %}
                        <div class="card card--big">
                            <div class="card__cover">
                                <img src="{{ movie.poster_path|mediaURL('w342') }}" alt="{{ movie.title }}">
                                <a href="{{ media_url }}" class="card__play">
                                    <i class="icon ion-ios-resize"></i>
                                </a>
                                {% if movie.vote_count > 0 %}
                                    <span class="card__rate card__rate--{{ movie.vote_average >= 7 ? 'green' : movie.vote_average >= 5 ? 'orange' : 'red' }}">{{ movie.vote_average }}</span>
                                {% endif %}
                            </div>
                            <div class="card__content">
                                <h3 class="card__title"><a href="{{ media_url }}">{{ movie.title }}</a></h3>
                                <span class="card__category">
                                    {% for genreId in movie.genre_ids %}
									<a href="{{ path('discover', {'genre': genreId}) }}">{{ genres[genreId] }}</a>
                                    {% endfor %}
								</span>
                            </div>
                        </div>
                        {% endfor %}
                        <!-- end card -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end home -->

    <!-- content -->
    <section class="content">
        <div class="content__head">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <!-- content title -->
                        <h2 class="content__title">{{ 'homepage.whats-new'|trans }}</h2>
                        <!-- end content title -->

                        <!-- content tabs nav -->
                        <ul class="nav nav-tabs content__tabs" id="content__tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">UPCOMMING MOVIES</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">ON AIR SHOWS</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">TV SERIES</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">CARTOONS</a>
                            </li>
                        </ul>
                        <!-- end content tabs nav -->

                        <!-- content mobile tabs nav -->
                        <div class="content__mobile-tabs" id="content__mobile-tabs">
                            <div class="content__mobile-tabs-btn dropdown-toggle" role="navigation" id="mobile-tabs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <input type="button" value="New releases">
                                <span></span>
                            </div>

                            <div class="content__mobile-tabs-menu dropdown-menu" aria-labelledby="mobile-tabs">
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item"><a class="nav-link active" id="1-tab" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">UPCOMMING MOVIES</a></li>

                                    <li class="nav-item"><a class="nav-link" id="2-tab" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">ON AIR SHOWS</a></li>

                                    <li class="nav-item"><a class="nav-link" id="3-tab" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">TV SERIES</a></li>

                                    <li class="nav-item"><a class="nav-link" id="4-tab" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">CARTOONS</a></li>
                                </ul>
                            </div>
                        </div>
                        <!-- end content mobile tabs nav -->
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- content tabs -->
            <div class="tab-content">
                <div class="tab-pane fade show active" id="tab-1" role="tabpanel" aria-labelledby="1-tab">
                    <div class="row">
                        <!-- card -->
                        {% for movie in upcomingMovies|slice(0, 18) %}
                            {% set media_url = path('movie-details', {movieId: movie.id}) %}
                        <div class="col-6 col-sm-4 col-md-3 col-xl-2">
                            <div class="card">
                                <div class="card__cover">
                                    <img src="{{ movie.poster_path|mediaURL('w342') }}" alt="">
                                    <a href="{{ media_url }}" class="card__play">
                                        <i class="icon ion-ios-resize"></i>
                                    </a>
                                    {% if movie.vote_count > 0 %}
                                        <span class="card__rate card__rate--{{ movie.vote_average >= 7 ? 'green' : movie.vote_average >= 5 ? 'orange' : 'red' }}">{{ movie.vote_average }}</span>
                                    {% endif %}
                                </div>
                                <div class="card__content">
                                    <h3 class="card__title"><a href="{{ media_url }}">{{ movie.title }}</a></h3>
                                    <span class="card__category">
										{% for genreId in movie.genre_ids %}
                                            <a href="{{ path('discover', {'genre': genreId}) }}">{{ genres[genreId] }}</a>
                                        {% endfor %}
									</span>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        <!-- end card -->
                    </div>
                </div>

                <div class="tab-pane fade" id="tab-2" role="tabpanel" aria-labelledby="2-tab">
                    <div class="row">
                        <!-- card -->
                        {% for show in onAirTvShows|slice(0, 18) %}
                            {% set media_url = path('tv-show-details', {tvShowId: show.id}) %}
                            <div class="col-6 col-sm-4 col-md-3 col-xl-2">
                                <div class="card">
                                    <div class="card__cover">
                                        <img src="{{ show.poster_path|mediaURL('w342') }}" alt="">
                                        <a href="{{ media_url }}" class="card__play">
                                            <i class="icon ion-ios-resize"></i>
                                        </a>
                                        {% if show.vote_count > 0 %}
                                            <span class="card__rate card__rate--{{ show.vote_average >= 7 ? 'green' : show.vote_average >= 5 ? 'orange' : 'red' }}">{{ show.vote_average }}</span>
                                        {% endif %}
                                    </div>
                                    <div class="card__content">
                                        <h3 class="card__title"><a href="{{ media_url }}">{{ show.name }}</a></h3>
                                        <span class="card__category">
										{% for genreId in show.genre_ids %}
                                            <a href="{{ path('discover', {'genre': genreId}) }}">{{ genres[genreId]|default('?') }}</a>
                                        {% endfor %}
									    </span>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        <!-- end card -->
                    </div>
                </div>

                <div class="tab-pane fade" id="tab-3" role="tabpanel" aria-labelledby="3-tab">
                    <div class="row">
                        <!-- card -->
                        <div class="col-6 col-sm-4 col-md-3 col-xl-2">
                            <div class="card">
                                <div class="card__cover">
                                    <img src="{{ asset('img/covers/cover.jpg') }}" alt="">
                                    <a href="#" class="card__play">
                                        <i class="icon ion-ios-resize"></i>
                                    </a>
                                    <span class="card__rate card__rate--green">8.4</span>
                                </div>
                                <div class="card__content">
                                    <h3 class="card__title"><a href="#">I Dream in Another Language</a></h3>
                                    <span class="card__category">
										<a href="#">Action</a>
										<a href="#">Triler</a>
									</span>
                                </div>
                            </div>
                        </div>
                        <!-- end card -->
                    </div>
                </div>

                <div class="tab-pane fade" id="tab-4" role="tabpanel" aria-labelledby="4-tab">
                    <div class="row">
                        <!-- card -->
                        <div class="col-6 col-sm-4 col-md-3 col-xl-2">
                            <div class="card">
                                <div class="card__cover">
                                    <img src="{{ asset('img/covers/cover.jpg') }}" alt="">
                                    <a href="#" class="card__play">
                                        <i class="icon ion-ios-resize"></i>
                                    </a>
                                    <span class="card__rate card__rate--green">8.4</span>
                                </div>
                                <div class="card__content">
                                    <h3 class="card__title"><a href="#">I Dream in Another Language</a></h3>
                                    <span class="card__category">
										<a href="#">Action</a>
										<a href="#">Triler</a>
									</span>
                                </div>
                            </div>
                        </div>
                        <!-- end card -->
                    </div>
                </div>
            </div>
            <!-- end content tabs -->
        </div>
    </section>
    <!-- end content -->
{% endblock content %}